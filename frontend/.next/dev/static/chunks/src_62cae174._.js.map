{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/cookie/Documents/Practice/learn-next/frontend/src/api/apiClient.js"],"sourcesContent":["import axios from \"axios\";\n\n\nconst apiClient = axios.create({\n\n    baseURL: \"http://127.0.0.1:8000/api/\",\n    withCredentials : true,\n\n})\n\n\nexport default apiClient;\n"],"names":[],"mappings":";;;;AAAA;;AAGA,MAAM,YAAY,mJAAK,CAAC,MAAM,CAAC;IAE3B,SAAS;IACT,iBAAkB;AAEtB;uCAGe","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/cookie/Documents/Practice/learn-next/frontend/src/api/apiAuth.js"],"sourcesContent":["import apiClient from \"./apiClient\";\n\n\nexport const LogIn = (formData) => apiClient.post('login/' , formData);\nexport const LogOut = () => apiClient.post('logout/');\nexport const CheckUser = () => apiClient.get('user_check/');"],"names":[],"mappings":";;;;;;;;AAAA;;AAGO,MAAM,QAAQ,CAAC,WAAa,qIAAS,CAAC,IAAI,CAAC,UAAW;KAAhD;AACN,MAAM,SAAS,IAAM,qIAAS,CAAC,IAAI,CAAC;MAA9B;AACN,MAAM,YAAY,IAAM,qIAAS,CAAC,GAAG,CAAC;MAAhC","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/cookie/Documents/Practice/learn-next/frontend/src/features/Authentication/authSlice.js"],"sourcesContent":["import { createAsyncThunk , createSlice } from \"@reduxjs/toolkit\";\nimport { LogIn , LogOut , CheckUser } from \"@/api/apiAuth\";\n\n\nexport const LogInAPI = createAsyncThunk('api/login/' , async(updateData , {rejectWithValue}) => {\n\n    try {\n        \n        const response = await LogIn(updateData);\n        return response.data;\n\n    } catch (err) {\n        \n        return rejectWithValue(err.response?.data || {\"error\" : \"Si è verificato un problema\"});\n    }\n})\n\n\nexport const LogOutAPI = createAsyncThunk('api/logout/' , async(_ , {rejectWithValue}) => {\n\n    try {\n        \n        const response = await LogOut();\n        document.cookie = \"access_token=; path=/; max-age=0\";\n        return response.data;\n\n    } catch (err) {\n        \n        return rejectWithValue(err.response?.data || {\"error\" : \"Si è verificato un problema\"});\n    }\n})\n\n\nexport const CheckUserAPI = createAsyncThunk('api/check_user/' , async(_ , {rejectWithValue}) => {\n    \n    try {\n        \n        const response = await CheckUser();\n        return response.data;\n\n    } catch (err) {\n        \n        return rejectWithValue(err.response?.data || {\"error\" : \"Si è verificato un problema\"});\n    }\n\n})\n\n\nconst authSlice = createSlice({\n\n    name : 'auth',\n\n    initialState : {user : null ,  status : 'idle' , error : null , checked : false},\n\n    reducers : {},\n\n\n    extraReducers : (builder) => {\n\n        builder\n        \n        .addCase(LogInAPI.pending , (state) => {\n            state.status = 'loading';            \n        })\n\n        .addCase(LogInAPI.fulfilled , (state , action) => {\n            state.status = 'succeeded';\n            state.user = action.payload;\n            //state.checked = true;\n        })\n\n        .addCase(LogInAPI.rejected , (state , action) => {\n            state.status = 'failed';\n            state.error = action.payload || {detail : \"errore sconosciuto\"};\n        })\n\n\n        .addCase(LogOutAPI.fulfilled , (state) => {\n            state.status = 'idle';\n            state.checked = true;\n            state.user = null;\n        })\n\n\n          \n        .addCase(CheckUserAPI.fulfilled , (state , action) =>{\n            state.checked = true;\n            \n            if (action.payload.loggedIn) {\n                state.user = { username: action.payload.username , nome : action.payload.nome , cognome : action.payload.cognome};\n            } else {\n                state.user = null;\n                state.status = 'idle';\n            }\n        })\n\n        .addCase(CheckUserAPI.rejected, (state) => {\n            state.status = 'idle';\n            state.checked = true;\n            state.user = null;\n        });\n\n    }\n})\n\n\nexport default authSlice.reducer;"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAGO,MAAM,WAAW,IAAA,kNAAgB,EAAC,cAAe,OAAM,YAAa,EAAC,eAAe,EAAC;IAExF,IAAI;QAEA,MAAM,WAAW,MAAM,IAAA,iIAAK,EAAC;QAC7B,OAAO,SAAS,IAAI;IAExB,EAAE,OAAO,KAAK;QAEV,OAAO,gBAAgB,IAAI,QAAQ,EAAE,QAAQ;YAAC,SAAU;QAA6B;IACzF;AACJ;AAGO,MAAM,YAAY,IAAA,kNAAgB,EAAC,eAAgB,OAAM,GAAI,EAAC,eAAe,EAAC;IAEjF,IAAI;QAEA,MAAM,WAAW,MAAM,IAAA,kIAAM;QAC7B,SAAS,MAAM,GAAG;QAClB,OAAO,SAAS,IAAI;IAExB,EAAE,OAAO,KAAK;QAEV,OAAO,gBAAgB,IAAI,QAAQ,EAAE,QAAQ;YAAC,SAAU;QAA6B;IACzF;AACJ;AAGO,MAAM,eAAe,IAAA,kNAAgB,EAAC,mBAAoB,OAAM,GAAI,EAAC,eAAe,EAAC;IAExF,IAAI;QAEA,MAAM,WAAW,MAAM,IAAA,qIAAS;QAChC,OAAO,SAAS,IAAI;IAExB,EAAE,OAAO,KAAK;QAEV,OAAO,gBAAgB,IAAI,QAAQ,EAAE,QAAQ;YAAC,SAAU;QAA6B;IACzF;AAEJ;AAGA,MAAM,YAAY,IAAA,6MAAW,EAAC;IAE1B,MAAO;IAEP,cAAe;QAAC,MAAO;QAAQ,QAAS;QAAS,OAAQ;QAAO,SAAU;IAAK;IAE/E,UAAW,CAAC;IAGZ,eAAgB,CAAC;QAEb,QAEC,OAAO,CAAC,SAAS,OAAO,EAAG,CAAC;YACzB,MAAM,MAAM,GAAG;QACnB,GAEC,OAAO,CAAC,SAAS,SAAS,EAAG,CAAC,OAAQ;YACnC,MAAM,MAAM,GAAG;YACf,MAAM,IAAI,GAAG,OAAO,OAAO;QAC3B,uBAAuB;QAC3B,GAEC,OAAO,CAAC,SAAS,QAAQ,EAAG,CAAC,OAAQ;YAClC,MAAM,MAAM,GAAG;YACf,MAAM,KAAK,GAAG,OAAO,OAAO,IAAI;gBAAC,QAAS;YAAoB;QAClE,GAGC,OAAO,CAAC,UAAU,SAAS,EAAG,CAAC;YAC5B,MAAM,MAAM,GAAG;YACf,MAAM,OAAO,GAAG;YAChB,MAAM,IAAI,GAAG;QACjB,GAIC,OAAO,CAAC,aAAa,SAAS,EAAG,CAAC,OAAQ;YACvC,MAAM,OAAO,GAAG;YAEhB,IAAI,OAAO,OAAO,CAAC,QAAQ,EAAE;gBACzB,MAAM,IAAI,GAAG;oBAAE,UAAU,OAAO,OAAO,CAAC,QAAQ;oBAAG,MAAO,OAAO,OAAO,CAAC,IAAI;oBAAG,SAAU,OAAO,OAAO,CAAC,OAAO;gBAAA;YACpH,OAAO;gBACH,MAAM,IAAI,GAAG;gBACb,MAAM,MAAM,GAAG;YACnB;QACJ,GAEC,OAAO,CAAC,aAAa,QAAQ,EAAE,CAAC;YAC7B,MAAM,MAAM,GAAG;YACf,MAAM,OAAO,GAAG;YAChB,MAAM,IAAI,GAAG;QACjB;IAEJ;AACJ;uCAGe,UAAU,OAAO","debugId":null}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///Users/cookie/Documents/Practice/learn-next/frontend/src/store/store.js"],"sourcesContent":["'use client';\n\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport authSlice from '@/features/Authentication/authSlice';\n\n\nconst store = configureStore({\n\n    reducer : {\n\n        auth : authSlice,\n\n    },\n});\n\n\nexport default store;\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAMA,MAAM,QAAQ,IAAA,gNAAc,EAAC;IAEzB,SAAU;QAEN,MAAO,4JAAS;IAEpB;AACJ;uCAGe","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///Users/cookie/Documents/Practice/learn-next/frontend/src/store/ReduxProvider.jsx"],"sourcesContent":["'use client';\n\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nexport default function ReduxProvider({ children }) {\n  return <Provider store={store}>{children}</Provider>;\n}\n\n"],"names":["c","_c","Provider","store","ReduxProvider","t0","$","$i","Symbol","for","children","t1"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,SAASC,QAAQ,QAAQ,aAAa;AACtC,OAAOC,KAAK,MAAM,SAAS;AAH3B,YAAY;;;;;AAKG,uBAAAE,EAAA;IAAA,MAAAC,CAAA,OAAAL,gLAAA,EAAA;IAAA,IAAAK,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAuB,MAAA,EAAAI,QAAAA,EAAA,GAAAL,EAAY;IAAA,IAAAM,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAI,QAAA,EAAA;QACzCC,EAAA,iBAAA,6LAAC,wKAAQ;YAAQR,KAAK,CAALA,CAAAA,mIAAI,CAAC,CAAGO;sBAAAA,QAAO,CAAE,EAAjC,QAAQ,CAAoC;;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAI,QAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAAA,OAA7CK,EAA6C;AAAA;KADvCP","ignoreList":[],"debugId":null}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///Users/cookie/Documents/Practice/learn-next/frontend/src/components/AppWrapper.jsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CheckUserAPI } from \"@/features/Authentication/authSlice\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function AppWrapper({ children }) {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const { user, checked } = useSelector((state) => state.auth);\n\n  useEffect(() => {\n    dispatch(CheckUserAPI());\n  }, [dispatch]);\n\n  // Loading iniziale: non fare redirect finché non abbiamo verificato l'utente\n  if (!checked) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen bg-slate-900\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  // Se l'utente NON è loggato, lo reindirizzo subito al login\n  if (checked && !user) {\n    router.replace(\"/\");\n    return null;\n  }\n\n  return children;\n}\n"],"names":["c","_c","useEffect","useDispatch","useSelector","CheckUserAPI","useRouter","AppWrapper","t0","$","$i","Symbol","for","children","dispatch","router","user","checked","_AppWrapperUseSelector","t1","t2","AppWrapper[useEffect()]","t3","replace","state","auth"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,YAAY,QAAQ,qCAAqC;AAClE,SAASC,SAAS,QAAQ,iBAAiB;;;AAL3C,YAAY;;;;;;AAOG,oBAAAE,EAAA;;IAAA,MAAAC,CAAA,OAAAR,gLAAA,EAAA;IAAA,IAAAQ,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAoB,MAAA,EAAAI,QAAAA,EAAA,GAAAL,EAAY;IAC7C,MAAAM,QAAA;IACA,MAAAC,MAAA;IACA,MAAA,EAAAC,IAAA,EAAAC,OAAAA,EAAA,oLAAsCC,sBAAqB,CAAC;IAAC,IAAAC,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAAX,CAAA,CAAA,EAAA,KAAAK,QAAA,EAAA;QAEnDK,EAAA,GAAA,CAAA;YAAA,2BAAAE,CAAA;gBACRP,QAAQ,KAACT,iKAAY,CAAC,CAAC,CAAC;YAAA;SAAA,CAAA,CAAA,0BACzB;QAAEe,EAAA,GAAA;YAACN,QAAQ;SAAC;QAAAL,CAAA,CAAA,EAAA,GAAAK,QAAA;QAAAL,CAAA,CAAA,EAAA,GAAAU,EAAA;QAAAV,CAAA,CAAA,EAAA,GAAAW,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAV,CAAA,CAAA,EAAA;QAAAW,EAAA,GAAAX,CAAA,CAAA,EAAA;IAAA;QAFbP,0KAAS,EAACiB,EAET,EAAEC,EAAU,CAAC;IAGd,IAAI,CAACH,OAAO,EAAA;QAAA,IAAAK,EAAA;QAAA,IAAAb,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAERU,EAAA,iBAAA,6LAAA,GAEM;gBAFS,SAA4D,EAA5D,4DAA4D;wCACzE,6LAAA,GAAiG;oBAAlF,SAA2E,EAA3E,2EAA2E,GAC5F,EAFA,GAEM;;;;;;;;;;;YAAAb,CAAA,CAAA,EAAA,GAAAa,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAb,CAAA,CAAA,EAAA;QAAA;QAAA,OAFNa,EAEM;IAAA;IAKV,IAAIL,OAAgB,IAAhB,CAAYD,IAAI,EAAA;QAClBD,MAAM,CAAAQ,OAAQ,CAAC,GAAG,CAAC;QAAA,OACZ,IAAI;IAAA;IACZ,OAEMV,QAAQ;AAAA;;;QAvBEV,2KAAW,CAAC,CAAC;QACfG,kJAAS,CAAC,CAAC;QACAF,2KAAW;;;KAHxBG;AAAA,SAAAW,uBAAAM,KAAA;IAAA,OAGoCA,KAAK,CAAAC,IAAK;AAAA","ignoreList":[],"debugId":null}}]
}